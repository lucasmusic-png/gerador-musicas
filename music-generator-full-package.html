<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Crie suas pr√≥prias m√∫sicas gratuitamente com nosso gerador de m√∫sicas por IA. 100% dos direitos autorais s√£o seus!">
    <title>Gerador de M√∫sicas Gratuito - Crie Suas Composi√ß√µes</title>
    
    <!-- React e bibliotecas -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tone.js para √°udio -->
    <script src="https://unpkg.com/tone@14.7.77/build/Tone.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
        
        /* Anima√ß√µes customizadas */
        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .animate-pulse-slow {
            animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Music2, Play, Square, Download, FileMusic, AlertCircle, Share2, Heart } = lucide;

        const MusicGenerator = () => {
            const [isPlaying, setIsPlaying] = useState(false);
            const [isGenerating, setIsGenerating] = useState(false);
            const [isRecording, setIsRecording] = useState(false);
            const [currentTab, setCurrentTab] = useState('lyrics');
            const [downloadStatus, setDownloadStatus] = useState('');
            const [songsGenerated, setSongsGenerated] = useState(0);
            
            const [songData, setSongData] = useState({
                title: '',
                lyrics: '',
                genre: 'pop',
                mood: 'happy',
                tempo: 120,
                key: 'C',
                structure: 'verse-chorus-verse-chorus-bridge-chorus'
            });

            const [instruments, setInstruments] = useState({
                piano: true,
                synth: true,
                bass: true,
                drums: true,
                strings: false,
                guitar: false
            });

            const synthsRef = useRef({});
            const mediaRecorderRef = useRef(null);
            const audioChunksRef = useRef([]);
            const [generatedSong, setGeneratedSong] = useState(null);
            const [recordedBlob, setRecordedBlob] = useState(null);

            useEffect(() => {
                // Inicializar instrumentos
                synthsRef.current = {
                    piano: new Tone.PolySynth(Tone.Synth, {
                        oscillator: { type: 'sine' },
                        envelope: { attack: 0.005, decay: 0.1, sustain: 0.3, release: 1 }
                    }).toDestination(),
                    
                    synth: new Tone.PolySynth(Tone.Synth, {
                        oscillator: { type: 'square' },
                        envelope: { attack: 0.02, decay: 0.1, sustain: 0.5, release: 0.8 }
                    }).toDestination(),
                    
                    bass: new Tone.MonoSynth({
                        oscillator: { type: 'sawtooth' },
                        envelope: { attack: 0.1, decay: 0.3, sustain: 0.4, release: 0.8 }
                    }).toDestination(),
                    
                    strings: new Tone.PolySynth(Tone.Synth, {
                        oscillator: { type: 'sawtooth' },
                        envelope: { attack: 0.3, decay: 0.1, sustain: 0.8, release: 1.5 }
                    }).toDestination(),
                    
                    guitar: new Tone.PolySynth(Tone.Synth, {
                        oscillator: { type: 'triangle' },
                        envelope: { attack: 0.01, decay: 0.2, sustain: 0.4, release: 0.6 }
                    }).toDestination(),
                    
                    drums: {
                        kick: new Tone.MembraneSynth({
                            pitchDecay: 0.05,
                            octaves: 4,
                            oscillator: { type: 'sine' },
                            envelope: { attack: 0.001, decay: 0.4, sustain: 0.01, release: 0.4 }
                        }).toDestination(),
                        
                        snare: new Tone.NoiseSynth({
                            noise: { type: 'white' },
                            envelope: { attack: 0.001, decay: 0.2, sustain: 0 }
                        }).toDestination(),
                        
                        hihat: new Tone.MetalSynth({
                            frequency: 200,
                            envelope: { attack: 0.001, decay: 0.1, release: 0.01 },
                            harmonicity: 5.1,
                            modulationIndex: 32,
                            resonance: 4000,
                            octaves: 1.5
                        }).toDestination()
                    }
                };

                // Ajustar volumes
                synthsRef.current.piano.volume.value = -8;
                synthsRef.current.synth.volume.value = -12;
                synthsRef.current.bass.volume.value = -10;
                synthsRef.current.strings.volume.value = -15;
                synthsRef.current.guitar.volume.value = -10;
                synthsRef.current.drums.kick.volume.value = -8;
                synthsRef.current.drums.snare.volume.value = -10;
                synthsRef.current.drums.hihat.volume.value = -15;

                // Carregar contador de m√∫sicas geradas
                const savedCount = localStorage.getItem('songsGenerated');
                if (savedCount) {
                    setSongsGenerated(parseInt(savedCount));
                }

                return () => {
                    Object.values(synthsRef.current).forEach(synth => {
                        if (synth.dispose) synth.dispose();
                        if (synth.kick) {
                            synth.kick.dispose();
                            synth.snare.dispose();
                            synth.hihat.dispose();
                        }
                    });
                };
            }, []);

            const scales = {
                'C': ['C', 'D', 'E', 'F', 'G', 'A', 'B'],
                'D': ['D', 'E', 'F#', 'G', 'A', 'B', 'C#'],
                'E': ['E', 'F#', 'G#', 'A', 'B', 'C#', 'D#'],
                'F': ['F', 'G', 'A', 'Bb', 'C', 'D', 'E'],
                'G': ['G', 'A', 'B', 'C', 'D', 'E', 'F#'],
                'A': ['A', 'B', 'C#', 'D', 'E', 'F#', 'G#'],
                'Am': ['A', 'B', 'C', 'D', 'E', 'F', 'G']
            };

            const chordProgressions = {
                pop: [[0, 5, 3, 4], [0, 4, 5, 3], [0, 3, 4, 5]],
                rock: [[0, 4, 5, 4], [0, 6, 3, 5], [0, 5, 6, 4]],
                ballad: [[0, 3, 5, 4], [0, 5, 3, 4], [5, 3, 0, 4]],
                electronic: [[0, 6, 3, 5], [0, 4, 6, 5], [5, 3, 6, 4]],
                jazz: [[0, 3, 5, 1], [5, 0, 3, 6], [1, 4, 0, 3]]
            };

            const generateChordProgression = (genre, key) => {
                const scale = scales[key] || scales['C'];
                const progressions = chordProgressions[genre] || chordProgressions['pop'];
                const progression = progressions[Math.floor(Math.random() * progressions.length)];
                
                return progression.map(degree => {
                    const root = scale[degree % scale.length];
                    const third = scale[(degree + 2) % scale.length];
                    const fifth = scale[(degree + 4) % scale.length];
                    return [root + '3', third + '3', fifth + '3'];
                });
            };

            const generateMelody = (key, length = 16) => {
                const scale = scales[key] || scales['C'];
                const melody = [];
                
                for (let i = 0; i < length; i++) {
                    const octave = Math.random() > 0.3 ? '4' : '5';
                    const noteIndex = Math.floor(Math.random() * scale.length);
                    melody.push(scale[noteIndex] + octave);
                }
                
                return melody;
            };

            const generateBassLine = (chords) => {
                return chords.map(chord => chord[0].replace('3', '2'));
            };

            const playDrumPattern = (startTime, duration, tempo) => {
                if (!instruments.drums) return;
                
                const beatDuration = 60 / tempo;
                const beats = Math.floor(duration / beatDuration);
                
                for (let i = 0; i < beats; i++) {
                    const time = startTime + i * beatDuration;
                    
                    if (i % 4 === 0 || i % 4 === 2) {
                        synthsRef.current.drums.kick.triggerAttackRelease('C1', '8n', time);
                    }
                    
                    if (i % 4 === 1 || i % 4 === 3) {
                        synthsRef.current.drums.snare.triggerAttackRelease('8n', time);
                    }
                    
                    synthsRef.current.drums.hihat.triggerAttackRelease('32n', time);
                }
            };

            const playSection = (chords, melody, bassLine, startTime, tempo) => {
                const beatDuration = 60 / tempo;
                
                chords.forEach((chord, i) => {
                    const time = startTime + i * beatDuration * 4;
                    
                    if (instruments.piano) {
                        synthsRef.current.piano.triggerAttackRelease(chord, '2n', time);
                    }
                    
                    if (instruments.synth) {
                        synthsRef.current.synth.triggerAttackRelease(chord, '1n', time);
                    }
                    
                    if (instruments.strings) {
                        synthsRef.current.strings.triggerAttackRelease(chord, '1n', time);
                    }
                    
                    if (instruments.guitar) {
                        for (let j = 0; j < 4; j++) {
                            synthsRef.current.guitar.triggerAttackRelease(chord, '8n', time + j * beatDuration);
                        }
                    }
                });

                melody.forEach((note, i) => {
                    const time = startTime + i * beatDuration;
                    if (instruments.piano) {
                        synthsRef.current.piano.triggerAttackRelease(note, '8n', time);
                    }
                });

                if (instruments.bass) {
                    bassLine.forEach((note, i) => {
                        const time = startTime + i * beatDuration * 4;
                        synthsRef.current.bass.triggerAttackRelease(note, '2n', time);
                    });
                }

                const sectionDuration = chords.length * beatDuration * 4;
                playDrumPattern(startTime, sectionDuration, tempo);
            };

            const generateSong = () => {
                setIsGenerating(true);
                
                setTimeout(() => {
                    const { genre, key, tempo, structure } = songData;
                    const sections = structure.split('-');
                    
                    const song = {
                        verse: {
                            chords: generateChordProgression(genre, key),
                            melody: generateMelody(key, 16),
                            bassLine: []
                        },
                        chorus: {
                            chords: generateChordProgression(genre, key),
                            melody: generateMelody(key, 16),
                            bassLine: []
                        },
                        bridge: {
                            chords: generateChordProgression(genre, key),
                            melody: generateMelody(key, 8),
                            bassLine: []
                        },
                        intro: {
                            chords: generateChordProgression(genre, key),
                            melody: generateMelody(key, 8),
                            bassLine: []
                        }
                    };
                    
                    Object.keys(song).forEach(section => {
                        song[section].bassLine = generateBassLine(song[section].chords);
                    });
                    
                    setGeneratedSong({ sections, data: song });
                    setIsGenerating(false);
                    setCurrentTab('preview');
                    
                    // Incrementar contador
                    const newCount = songsGenerated + 1;
                    setSongsGenerated(newCount);
                    localStorage.setItem('songsGenerated', newCount.toString());
                }, 1500);
            };

            const startRecording = () => {
                try {
                    const dest = Tone.getDestination();
                    const audioContext = dest.context.rawContext;
                    const streamDestination = audioContext.createMediaStreamDestination();
                    
                    dest.connect(streamDestination);
                    const stream = streamDestination.stream;
                    
                    const mimeTypes = [
                        'audio/webm;codecs=opus',
                        'audio/webm',
                        'audio/ogg',
                        'audio/mp4'
                    ];
                    
                    let selectedMimeType = '';
                    for (const mimeType of mimeTypes) {
                        if (MediaRecorder.isTypeSupported(mimeType)) {
                            selectedMimeType = mimeType;
                            break;
                        }
                    }
                    
                    if (!selectedMimeType) {
                        setDownloadStatus('‚ùå Navegador n√£o suporta grava√ß√£o de √°udio');
                        return;
                    }
                    
                    mediaRecorderRef.current = new MediaRecorder(stream, {
                        mimeType: selectedMimeType
                    });
                    
                    audioChunksRef.current = [];
                    
                    mediaRecorderRef.current.ondataavailable = (event) => {
                        if (event.data.size > 0) {
                            audioChunksRef.current.push(event.data);
                        }
                    };
                    
                    mediaRecorderRef.current.onstop = () => {
                        const blob = new Blob(audioChunksRef.current, { type: selectedMimeType });
                        setRecordedBlob(blob);
                        setDownloadStatus('‚úÖ √Åudio pronto para download!');
                    };
                    
                    mediaRecorderRef.current.start(100);
                    setIsRecording(true);
                    setDownloadStatus('üéôÔ∏è Gravando...');
                    
                } catch (error) {
                    console.error('Erro ao iniciar grava√ß√£o:', error);
                    setDownloadStatus('‚ùå Erro ao iniciar grava√ß√£o');
                }
            };

            const stopRecording = () => {
                if (mediaRecorderRef.current && mediaRecorderRef.current.state !== 'inactive') {
                    mediaRecorderRef.current.stop();
                    setIsRecording(false);
                }
            };

            const playSong = async () => {
                if (!generatedSong) return;
                
                await Tone.start();
                setIsPlaying(true);

                const { sections, data } = generatedSong;
                const { tempo } = songData;
                let currentTime = Tone.now();

                sections.forEach(section => {
                    const sectionData = data[section] || data.verse;
                    const { chords, melody, bassLine } = sectionData;
                    
                    playSection(chords, melody, bassLine, currentTime, tempo);
                    
                    const beatDuration = 60 / tempo;
                    const sectionDuration = chords.length * beatDuration * 4;
                    currentTime += sectionDuration;
                });

                const totalDuration = sections.reduce((acc, section) => {
                    const sectionData = data[section] || data.verse;
                    const beatDuration = 60 / tempo;
                    return acc + (sectionData.chords.length * beatDuration * 4 * 1000);
                }, 0);

                setTimeout(() => {
                    setIsPlaying(false);
                }, totalDuration);
            };

            const stopSong = () => {
                Tone.Transport.stop();
                Tone.Transport.cancel();
                setIsPlaying(false);
            };

            const recordAndDownload = async () => {
                if (!generatedSong) return;
                
                setDownloadStatus('‚è≥ Preparando grava√ß√£o...');
                setRecordedBlob(null);
                
                await Tone.start();
                startRecording();

                const { sections, data } = generatedSong;
                const { tempo } = songData;
                let currentTime = Tone.now();

                sections.forEach(section => {
                    const sectionData = data[section] || data.verse;
                    const { chords, melody, bassLine } = sectionData;
                    
                    playSection(chords, melody, bassLine, currentTime, tempo);
                    
                    const beatDuration = 60 / tempo;
                    const sectionDuration = chords.length * beatDuration * 4;
                    currentTime += sectionDuration;
                });

                const totalDuration = sections.reduce((acc, section) => {
                    const sectionData = data[section] || data.verse;
                    const beatDuration = 60 / tempo;
                    return acc + (sectionData.chords.length * beatDuration * 4 * 1000);
                }, 0);

                setTimeout(() => {
                    stopRecording();
                }, totalDuration + 500);
            };

            const downloadRecordedAudio = () => {
                if (!recordedBlob) return;
                
                try {
                    const url = URL.createObjectURL(recordedBlob);
                    const a = document.createElement('a');
                    a.style.display = 'none';
                    a.href = url;
                    a.download = `${songData.title || 'minha-musica'}.webm`;
                    document.body.appendChild(a);
                    a.click();
                    
                    setTimeout(() => {
                        document.body.removeChild(a);
                        URL.revokeObjectURL(url);
                    }, 100);
                    
                    setDownloadStatus('‚úÖ Download iniciado!');
                } catch (error) {
                    console.error('Erro no download:', error);
                    setDownloadStatus('‚ùå Erro ao baixar arquivo');
                }
            };

            const shareApp = () => {
                if (navigator.share) {
                    navigator.share({
                        title: 'Gerador de M√∫sicas Gratuito',
                        text: 'Crie suas pr√≥prias m√∫sicas gratuitamente!',
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(window.location.href);
                    alert('Link copiado! Compartilhe com seus amigos! üéµ');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-900 p-4 md:p-8">
                    <div className="max-w-6xl mx-auto">
                        {/* Header com Stats */}
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden mb-6">
                            <div className="bg-gradient-to-r from-purple-600 to-pink-600 p-6">
                                <div className="flex flex-col md:flex-row items-center justify-between gap-4">
                                    <div className="flex items-center gap-3">
                                        <Music2 className="w-10 h-10 text-white" />
                                        <div>
                                            <h1 className="text-2xl md:text-3xl font-bold text-white">Gerador de M√∫sicas</h1>
                                            <p className="text-purple-100 text-sm">100% Gratuito - Seus Direitos Autorais</p>
                                        </div>
                                    </div>
                                    <div className="flex gap-4">
                                        <div className="bg-white/20 rounded-lg px-4 py-2 text-center">
                                            <p className="text-2xl font-bold text-white">{songsGenerated}</p>
                                            <p className="text-xs text-purple-100">M√∫sicas Criadas</p>
                                        </div>
                                        <button
                                            onClick={shareApp}
                                            className="bg-white/20 hover:bg-white/30 rounded-lg px-4 py-2 text-white transition flex items-center gap-2"
                                        >
                                            <Share2 className="w-5 h-5" />
                                            <span className="hidden md:inline">Compartilhar</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl shadow-2xl overflow-hidden">
                            {/* Tabs */}
                            <div className="flex border-b border-white/20">
                                {['lyrics', 'settings', 'preview'].map(tab => (
                                    <button
                                        key={tab}
                                        onClick={() => setCurrentTab(tab)}
                                        className={`flex-1 py-4 px-3 md:px-6 font-semibold transition text-sm md:text-base ${
                                            currentTab === tab
                                                ? 'bg-white/20 text-white border-b-2 border-white'
                                                : 'text-purple-200 hover:bg-white/10'
                                        }`}
                                    >
                                        {tab === 'lyrics' && 'üìù Letra'}
                                        {tab === 'settings' && '‚öôÔ∏è Config'}
                                        {tab === 'preview' && 'üéµ Preview'}
                                    </button>
                                ))}
                            </div>

                            {/* Content */}
                            <div className="p-4 md:p-6">
                                {/* Lyrics Tab */}
                                {currentTab === 'lyrics' && (
                                    <div className="space-y-4 md:space-y-6">
                                        <div>
                                            <label className="block text-white font-semibold mb-2">T√≠tulo da M√∫sica</label>
                                            <input
                                                type="text"
                                                value={songData.title}
                                                onChange={(e) => setSongData({...songData, title: e.target.value})}
                                                placeholder="Ex: Minha Primeira Composi√ß√£o"
                                                className="w-full p-3 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-white font-semibold mb-2">Letra da M√∫sica</label>
                                            <textarea
                                                value={songData.lyrics}
                                                onChange={(e) => setSongData({...songData, lyrics: e.target.value})}
                                                placeholder="Digite sua letra aqui...

Verso 1:
...

Refr√£o:
..."
                                                rows={12}
                                                className="w-full p-4 rounded-lg bg-white/20 text-white placeholder-purple-300 border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400 font-mono text-sm"
                                            />
                                            <p className="text-purple-200 text-xs md:text-sm mt-2">
                                                üí° Dica: Escreva sua letra com versos e refr√µes bem definidos
                                            </p>
                                        </div>
                                    </div>
                                )}

                                {/* Settings Tab */}
                                {currentTab === 'settings' && (
                                    <div className="space-y-4 md:space-y-6">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                                            <div>
                                                <label className="block text-white font-semibold mb-2 text-sm md:text-base">G√™nero Musical</label>
                                                <select
                                                    value={songData.genre}
                                                    onChange={(e) => setSongData({...songData, genre: e.target.value})}
                                                    className="w-full p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                                >
                                                    <option value="pop">Pop</option>
                                                    <option value="rock">Rock</option>
                                                    <option value="ballad">Balada</option>
                                                    <option value="electronic">Eletr√¥nica</option>
                                                    <option value="jazz">Jazz</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label className="block text-white font-semibold mb-2 text-sm md:text-base">Humor/Mood</label>
                                                <select
                                                    value={songData.mood}
                                                    onChange={(e) => setSongData({...songData, mood: e.target.value})}
                                                    className="w-full p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                                >
                                                    <option value="happy">Alegre</option>
                                                    <option value="sad">Triste</option>
                                                    <option value="energetic">Energ√©tico</option>
                                                    <option value="calm">Calmo</option>
                                                    <option value="romantic">Rom√¢ntico</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label className="block text-white font-semibold mb-2 text-sm md:text-base">Tom Musical</label>
                                                <select
                                                    value={songData.key}
                                                    onChange={(e) => setSongData({...songData, key: e.target.value})}
                                                    className="w-full p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400"
                                                >
                                                    <option value="C">D√≥ Maior (C)</option>
                                                    <option value="D">R√© Maior (D)</option>
                                                    <option value="E">Mi Maior (E)</option>
                                                    <option value="F">F√° Maior (F)</option>
                                                    <option value="G">Sol Maior (G)</option>
                                                    <option value="A">L√° Maior (A)</option>
                                                    <option value="Am">L√° Menor (Am)</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label className="block text-white font-semibold mb-2 text-sm md:text-base">Andamento (BPM): {songData.tempo}</label>
                                                <input
                                                    type="range"
                                                    min="60"
                                                    max="180"
                                                    value={songData.tempo}
                                                    onChange={(e) => setSongData({...songData, tempo: parseInt(e.target.value)})}
                                                    className="w-full"
                                                />
                                                <p className="text-purple-200 text-xs mt-1">60 = Lento | 120 = M√©dio | 180 = R√°pido</p>
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-white font-semibold mb-3 text-sm md:text-base">Instrumentos</label>
                                            <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                                                {Object.entries(instruments).map(([key, value]) => (
                                                    <label key={key} className="flex items-center gap-2 md:gap-3 bg-white/10 rounded-lg p-2 md:p-3 cursor-pointer hover:bg-white/20 transition">
                                                        <input
                                                            type="checkbox"
                                                            checked={value}
                                                            onChange={(e) => setInstruments({...instruments, [key]: e.target.checked})}
                                                            className="w-4 h-4 md:w-5 md:h-5"
                                                        />
                                                        <span className="text-white capitalize text-sm md:text-base">
                                                            {key === 'synth' ? 'Sintetizador' :
                                                             key === 'bass' ? 'Baixo' :
                                                             key === 'drums' ? 'Bateria' :
                                                             key === 'strings' ? 'Cordas' :
                                                             key === 'guitar' ? 'Guitarra' : 'Piano'}
                                                        </span>
                                                    </label>
                                                ))}
                                            </div>
                                        </div>

                                        <div>
                                            <label className="block text-white font-semibold mb-2 text-sm md:text-base">Estrutura da M√∫sica</label>
                                            <select
                                                value={songData.structure}
                                                onChange={(e) => setSongData({...songData, structure: e.target.value})}
                                                className="w-full p-3 rounded-lg bg-white/20 text-white border border-white/30 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm md:text-base"
                                            >
                                                <option value="verse-chorus-verse-chorus">Verso-Refr√£o-Verso-Refr√£o</option>
                                                <option value="verse-chorus-verse-chorus-bridge-chorus">Verso-Refr√£o-Verso-Refr√£o-Ponte-Refr√£o</option>
                                                <option value="intro-verse-chorus-verse-chorus-bridge-chorus">Com Intro</option>
                                            </select>
                                        </div>

                                        <button
                                            onClick={generateSong}
                                            disabled={isGenerating}
                                            className="w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:from-gray-500 disabled:to-gray-600 text-white font-bold py-4 rounded-xl transition shadow-lg flex items-center justify-center gap-2"
                                        >
                                            {isGenerating ? (
                                                <>
                                                    <div className="animate-spin rounded-full h-6 w-6 border-b-2 border-white"></div>
                                                    <span className="text-sm md:text-base">Gerando M√∫sica...</span>
                                                </>
                                            ) : (
                                                <>
                                                    <Music2 className="w-6 h-6" />
                                                    <span className="text-sm md:text-base">Gerar M√∫sica</span>
                                                </>
                                            )}
                                        </button>
                                    </div>
                                )}

                                {/* Preview Tab */}
                                {currentTab === 'preview' && (
                                    <div className="space-y-4 md:space-y-6">
                                        {!generatedSong ? (
                                            <div className="text-center py-12">
                                                <FileMusic className="w-16 h-16 text-purple-300 mx-auto mb-4" />
                                                <p className="text-white text-base md:text-lg">Nenhuma m√∫sica gerada ainda</p>
                                                <p className="text-purple-200 text-xs md:text-sm mt-2">
                                                    Configure sua m√∫sica e clique em "Gerar M√∫sica"
                                                </p>
                                            </div>
                                        ) : (
                                            <>
                                                <div className="bg-white/10 rounded-xl p-4 md:p-6">
                                                    <h3 className="text-white font-bold text-lg md:text-xl mb-2">{songData.title || 'Sem T√≠tulo'}</h3>
                                                    <div className="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 text-xs md:text-sm">
                                                        <div>
                                                            <p className="text-purple-300">G√™nero</p>
                                                            <p className="text-white font-semibold capitalize">{songData.genre}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300">Tom</p>
                                                            <p className="text-white font-semibold">{songData.key}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300">BPM</p>
                                                            <p className="text-white font-semibold">{songData.tempo}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300">Estrutura</p>
                                                            <p className="text-white font-semibold">{generatedSong.sections.length} se√ß√µes</p>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div className="flex flex-col gap-3 md:gap-4">
                                                    {!isPlaying ? (
                                                        <button
                                                            onClick={playSong}
                                                            className="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 md:py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg text-sm md:text-base"
                                                        >
                                                            <Play className="w-5 h-5 md:w-6 md:h-6" />
                                                            Tocar Preview (N√£o Grava)
                                                        </button>
                                                    ) : (
                                                        <button
                                                            onClick={stopSong}
                                                            className="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 md:py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg text-sm md:text-base"
                                                        >
                                                            <Square className="w-5 h-5 md:w-6 md:h-6" />
                                                            Parar
                                                        </button>
                                                    )}
                                                    
                                                    <button
                                                        onClick={recordAndDownload}
                                                        disabled={isPlaying || isRecording}
                                                        className="w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-500 disabled:cursor-not-allowed text-white font-bold py-3 md:py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg text-sm md:text-base"
                                                    >
                                                        {isRecording ? (
                                                            <>
                                                                <div className="animate-pulse w-3 h-3 bg-red-500 rounded-full"></div>
                                                                Gravando...
                                                            </>
                                                        ) : (
                                                            <>
                                                                <Download className="w-5 h-5 md:w-6 md:h-6" />
                                                                Gravar e Preparar Download
                                                            </>
                                                        )}
                                                    </button>

                                                    {recordedBlob && (
                                                        <button
                                                            onClick={downloadRecordedAudio}
                                                            className="w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-3 md:py-4 rounded-xl flex items-center justify-center gap-2 transition shadow-lg animate-pulse-slow text-sm md:text-base"
                                                        >
                                                            <Download className="w-5 h-5 md:w-6 md:h-6" />
                                                            BAIXAR ARQUIVO AGORA!
                                                        </button>
                                                    )}

                                                    {downloadStatus && (
                                                        <div className={`p-3 md:p-4 rounded-lg flex items-center gap-3 text-xs md:text-sm ${
                                                            downloadStatus.includes('‚úÖ') ? 'bg-green-500/20 border border-green-500/50' :
                                                            downloadStatus.includes('‚ùå') ? 'bg-red-500/20 border border-red-500/50' :
                                                            'bg-blue-500/20 border border-blue-500/50'
                                                        }`}>
                                                            <AlertCircle className="w-4 h-4 md:w-5 md:h-5 text-white flex-shrink-0" />
                                                            <p className="text-white">{downloadStatus}</p>
                                                        </div>
                                                    )}
                                                </div>

                                                <div className="bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-3 md:p-4">
                                                    <p className="text-yellow-200 text-xs md:text-sm">
                                                        <strong>üì• Como baixar:</strong><br/>
                                                        1Ô∏è‚É£ Clique em "Gravar e Preparar Download"<br/>
                                                        2Ô∏è‚É£ Aguarde a m√∫sica tocar completamente<br/>
                                                        3Ô∏è‚É£ Quando aparecer o bot√£o "BAIXAR ARQUIVO AGORA", clique nele<br/>
                                                        4Ô∏è‚É£ O arquivo .webm ser√° baixado (pode converter para MP3 depois)
                                                    </p>
                                                </div>

                                                <div className="bg-green-500/20 border border-green-500/50 rounded-lg p-3 md:p-4">
                                                    <p className="text-green-200 text-xs md:text-sm">
                                                        <strong>‚úÖ Direitos Autorais:</strong> Esta m√∫sica foi 100% gerada por voc√™ usando esta ferramenta. 
                                                        Todos os direitos autorais pertencem a voc√™! Voc√™ pode registr√°-la como sua composi√ß√£o.
                                                    </p>
                                                </div>
                                            </>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* Footer Info */}
                        <div className="mt-4 md:mt-6 bg-blue-500/20 border border-blue-500/50 rounded-xl p-3 md:p-4">
                            <p className="text-blue-200 text-xs md:text-sm">
                                <strong>üí° Como usar:</strong><br/>
                                1Ô∏è‚É£ Escreva sua letra na aba "Letra"<br/>
                                2Ô∏è‚É£ Configure estilo, tom e instrumentos em "Configura√ß√µes"<br/>
                                3Ô∏è‚É£ Clique em "Gerar M√∫sica"<br/>
                                4Ô∏è‚É£ Na aba Preview, grave e baixe o arquivo!<br/>
                                5Ô∏è‚É£ Use Audacity ou BandLab para mixar com sua voz
                            </p>
                        </div>

                        {/* Footer Credits */}
                        <div className="mt-4 text-center">
                            <p className="text-purple-300 text-xs md:text-sm flex items-center justify-center gap-2">
                                Feito com <Heart className="w-4 h-4 text-red-400 fill-current" /> para m√∫sicos independentes
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // Renderizar a aplica√ß√£o
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MusicGenerator />);
    </script>
</body>
</html>